<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Page with Firebase History</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
    <link rel="stylesheet" href="./profile.css">
</head>
<body>

    <!-- Sidebar -->
    <div class="sidebar">
        <div class="profile-section">
            <img src="./profile.jpg" alt="Profile Photo" class="profile-photo">
            <div class="profile-name">John Doe</div>
        </div>

        <!-- History Section -->
        <div class="history">
            <h4>History</h4>
            <div id="history-list">
                <p>Loading history...</p>
            </div>
        </div>

        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Profile</a></li>
            <li><a href="#">Settings</a></li>
            <li><a href="#">Logout</a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <h2>Welcome to Your Dashboard</h2>
        <p>This is where your content will go.</p>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "your-api-key",
            authDomain: "your-auth-domain",
            projectId: "your-project-id",
            storageBucket: "your-storage-bucket",
            messagingSenderId: "your-messaging-sender-id",
            appId: "your-app-id"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Fetch History from Firestore
        function fetchHistory() {
            const historyList = document.getElementById("history-list");
            historyList.innerHTML = "<p>Loading history...</p>";

            db.collection("history").orderBy("timestamp", "desc").limit(5).get()
                .then((querySnapshot) => {
                    historyList.innerHTML = ""; // Clear loading text
                    querySnapshot.forEach((doc) => {
                        const data = doc.data();
                        const historyItem = document.createElement("div");
                        historyItem.classList.add("history-item");
                        historyItem.textContent = data.activity;
                        historyList.appendChild(historyItem);
                    });
                })
                .catch((error) => {
                    console.error("Error fetching history:", error);
                    historyList.innerHTML = "<p>Error loading history.</p>";
                });
        }

        // Load history on page load
        fetchHistory();
    </script>

</body>
</html>
